var _fs_hash="7faaea7af0d90cca41efc5f5501cbedd";
try{"undefined"===typeof WeakMap&&function(){var m=Object.defineProperty,y=Date.now()%1E9,a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(y++ +"__")};a.prototype={set:function(a,n){var c=a[this.name];c&&c[0]===a?c[1]=n:m(a,this.name,{value:[a,n],writable:!0})},get:function(a){var n;return(n=a[this.name])&&n[0]===a?n[1]:void 0}};window.WeakMap=a}()}catch(e$$12){};try{(function(m){function y(){l=!1;var b=A;A=[];b.sort(function(a,b){return a.uid_-b.uid_});var g=!1;b.forEach(function(b){var d=b.takeRecords();a(b);d.length&&(b.callback_(d,b),g=!0)});g&&y()}function a(a){a.nodes_.forEach(function(b){(b=k.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function h(a,b){for(var g=a;g;g=g.parentNode){var d=k.get(g);if(d)for(var e=0;e<d.length;e++){var f=d[e],c=f.options;(g===a||c.subtree)&&(c=b(c))&&f.enqueue(c)}}}function n(a){this.callback_=
a;this.nodes_=[];this.records_=[];this.uid_=++x}function c(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function d(a,b){return w=new c(a,b)}function b(a){if(s)return s;var b=w,g=new c(b.type,b.target);g.addedNodes=b.addedNodes.slice();g.removedNodes=b.removedNodes.slice();g.previousSibling=b.previousSibling;g.nextSibling=b.nextSibling;g.attributeName=b.attributeName;g.attributeNamespace=
b.attributeNamespace;g.oldValue=b.oldValue;s=g;s.oldValue=a;return s}function g(a,b,g){this.observer=a;this.target=b;this.options=g;this.transientObservedNodes=[]}var k=new WeakMap,e=window.msSetImmediate;if(!e){var f=[],t=String(Math.random());window.addEventListener("message",function(a){a.data===t&&(a=f,f=[],a.forEach(function(a){a()}))});e=function(a){f.push(a);window.postMessage(t,"*")}}var l=!1,A=[],x=0;n.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||
a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=k.get(a);d||k.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f];e.removeListeners();e.options=b;break}e||(e=new g(this,a,b),d.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=k.get(a);for(var b=0;b<a.length;b++){var g=
a[b];if(g.observer===this){g.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var w,s;g.prototype={enqueue:function(a){var b=this.observer.records_,g=b.length;if(0<b.length){var d=b[g-1];d=d===a?d:!s||d!==s&&d!==w?null:s;if(d){b[g-1]=d;return}}else A.push(this.observer),l||(l=!0,e(y));b[g]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",
this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",
this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=k.get(a);b||k.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=k.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){a.stopImmediatePropagation();
switch(a.type){case "DOMAttrModified":var g=a.attrName,k=a.relatedNode.namespaceURI,e=a.target,f=new d("attributes",e);f.attributeName=g;f.attributeNamespace=k;var c=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;h(e,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(g)||-1!==a.attributeFilter.indexOf(k)))return a.attributeOldValue?b(c):f});break;case "DOMCharacterDataModified":e=a.target;f=d("characterData",e);c=a.prevValue;h(e,function(a){if(a.characterData)return a.characterDataOldValue?
b(c):f});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var e=a.relatedNode,t=a.target,l;"DOMNodeInserted"===a.type?(a=[t],l=[]):(a=[],l=[t]);var n=t.previousSibling,t=t.nextSibling,f=d("childList",e);f.addedNodes=a;f.removedNodes=l;f.previousSibling=n;f.nextSibling=t;h(e,function(a){if(a.childList)return f})}w=s=void 0}};m.JsMutationObserver=n;!m.MutationObserver&&m.WebKitMutationObserver&&(m.MutationObserver=m.WebKitMutationObserver);m.MutationObserver||(m.MutationObserver=
n)})(this)}catch(e$$15){};(function(){var m;(function(a){a.EVENT_MUT_UNPARSED_INSERT=0;a.EVENT_MUT_PARSED_INSERT=1;a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=
22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.isUserActionEvent=function(h){switch(h){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1}})(m||
(m={}));(function(a){function h(a){var g={};if(!a)return g;if(a.classList)for(var d=0;d<a.classList.length;++d)g[a.classList[d]]=!0;else for(a=(null!=a.className.animVal?a.className.animVal:a.className).split(" "),d=0;d<a.length;++d)g[a[d].trim()]=!0;return g}a.NYI_KIND="nyi";a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var n=function(){function a(b,d){var e=this;this._parent=b;this._classes={};this._attrs={};for(var f=0,c=0,l=0,h=function(){if(0!=l-c)switch(f){case 0:e._tag=d.slice(c,l);break;case 1:e._id=
d.slice(c+1,l);break;case 2:e._classes[d.slice(c+1,l)]=!0;break;case 3:var a=d.slice(c,l).slice(1).split("="),b=a[0].trim(),a=a[1].trim();if("]"!=a[a.length-1])throw"Unsupported selector";a=a.slice(0,a.length-1);if("'"==a[0]||'"'==a[0]){if(a[a.length-1]!=a[0])throw"Unsupported selector";a=a.slice(1,a.length-1)}e._attrs[b]=a}},l=0;l<d.length;++l)switch(d[l]){case "#":h();f=1;c=l;break;case ".":h();f=2;c=l;break;case "[":h(),f=3,c=l}h()}a.prototype.parent=function(){return this._parent};a.prototype.serialize=
function(){var a="";this._tag&&(a+=this._tag);this._id&&(a+="#"+this._id);for(var b in this._classes)a+="."+b;for(var d in this._attrs)a+="["+d+"="+this._attrs[d]+"]";return a};a.prototype.matches=function(a,b){if(!a||this._tag&&a.tagName.toLowerCase()!=this._tag||this._id&&a.id!=this._id)return!1;for(var d in this._classes)if(!(d in b))return!1;for(var f in this._attrs)if(a.getAttribute(f)!=this._attrs[f])return!1;return this._parent?this._parent.matches(a.parentElement,h(a.parentElement)):!0};return a}();
a.BlockRuleElem=n;var c=function(){function a(b){this.kind=b.Kind;b=b.Selector.split(">");for(var d=null,e=0;e<b.length;)var f=b[e++].trim(),d=new n(d,f);this.rules=d}a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent())a=a?b.serialize()+">"+a:b.serialize();return a};return a}();a.BlockRule=c;var d=function(){function a(){this._rules=[];this._isIdBlocked={};this.rawRules=[]}a.prototype.isBlocked=function(a){for(var b=h(a),d=0;d<this._rules.length;++d)if(this._rules[d].rules.matches(a,
b))return this._isIdBlocked[a._fsid]=a,this._rules[d].kind;return null};a.prototype.wasIdBlocked=function(a){return this._isIdBlocked[a+""]};a.prototype.addRule=function(a){this.rawRules.push(a);this._rules.push(new c(a))};a.prototype.mungeBlockedStyle=function(a,b){var d=a.getBoundingClientRect(),f=Math.floor(d.width),d=Math.floor(d.height);if("object"==a.tagName.toLowerCase())for(var c=a.children,l=0;l<c.length;l++){var h=c[l];if("embed"==h.tagName.toLowerCase()){c=h.getBoundingClientRect();f=Math.max(f,
Math.floor(c.width));d=Math.max(d,Math.floor(c.height));break}}c="";null!=b&&(c=b.trim());0<c.length&&";"!=c.charAt(c.length-1)&&(c+=";");l=a.style.getPropertyValue("display");"inline"==(l?l:window.getComputedStyle(a).getPropertyValue("display")).toLowerCase()&&(c+="display: inline-block !important;");if(0!=f||0!=d)c+="width:"+f+"px;height:"+d+"px;";return c};return a}();a.Blocker=d})(m||(m={}));(function(a){function h(a,b){b.parent=a;a.child&&(a.child.prev=b,b.next=a.child);a.child=b}function n(a){a.parent.child==
a&&(a.parent.child=a.next);a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev);a.parent=a.prev=a.next=null}var c=function(){function a(){this._root={parent:null,child:null,prev:null,next:null,fromId:-1,toId:-1,parentIds:[]};this._ranges=[this._root]}a.prototype.insert=function(a,d,c){var e=this.find(c[0]);a={parent:e,child:null,prev:null,next:null,fromId:a,toId:d,parentIds:c};h(e,a);this._ranges.push(a);return a};a.prototype.remove=function(a){var d=this._find(a);if(0>d)return null;var c=this._ranges[d];
if(a==c.fromId)return n(c),this._removeNodeFromRanges(c),c;var e=c.fromId,f=c.parentIds;c.parentIds=f.slice(0,a-e);c.toId=a-1;for(var t=[];a<e+f.length;){for(var l=a+1;f[l-e]>f[a-e];)++l;--l;t.push({parent:c,child:null,prev:null,next:null,fromId:a,toId:l,parentIds:f.slice(a-e,l-e+1)});a=l+1}for(e=c.child;e;){f=e.next;l=e.parentIds[0];if(l>c.toId)for(a=0;a<t.length;++a)if(l<=t[a].toId){n(e);h(t[a],e);break}e=f}e=t.shift();e.parentIds[0]=-1;n(e);f=c.child;for(a=0;a<t.length;++a)l=t[a],l.next=f,c.child=
l,f&&(f.prev=l),f=l;d=[d+1,0].concat(t);this._ranges.splice.apply(this._ranges,d);this._removeNodeFromRanges(e);return e};a.prototype.find=function(a){a=this._find(a);return 0<=a?this._ranges[a]:null};a.prototype._getRoot=function(){return this._root};a.prototype._getRanges=function(){return this._ranges};a.prototype._removeNodeFromRanges=function(a){var d=this._find(a.fromId);0<=d&&this._ranges.splice(d,1);for(a=a.child;a;a=a.next)this._removeNodeFromRanges(a)};a.prototype._find=function(a){if(isNaN(a))return-1;
for(var d=0,c=this._ranges.length-1;d<=c;){var e=Math.floor((d+c)/2),f=this._ranges[e];if(a>f.toId)d=e+1;else if(a<f.fromId)c=e-1;else{if(a>=f.fromId&&a<=f.toId)return e;break}}return-1};return a}();a.IdTree=c})(m||(m={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=
11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(m||(m={}));(function(a){function h(a){return"_fsblocked"in a}function n(a){a._fsblocked=!0}function c(a){return parseInt(a._fsid)}function d(a,b){return a._fsid=b}function b(a,b){if(a.attributes&&0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var c=a.attributes[d];b(c.name,c.value)}}var g={};a._isWebKitIsh=-1!=navigator.userAgent.indexOf("WebKit");a.hasFsid=function(a){return"_fsid"in
a};a.isBlocked=h;a.setBlocked=n;a.removeFsid=function(a){delete a._fsid};a.fsid=c;a.setFsid=d;a.fsidIfNotBlocked=function(a){return h(a)?NaN:c(a)};var k=function(){function c(a,b){this._ctx=a;this._blocker=b;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.unpinNodes=function(b){if(b&&a._isWebKitIsh){for(var d=b.fromId;d<=b.toId;++d)delete g[d];for(b=b.child;b;b=b.next)this.unpinNodes(b)}};c.prototype.tokenizeNode=function(a,b,d){var c=this._curId;try{var g=[],e=[];this.tokeNode(a,
b,g,e,d);return{stream:g,parents:e,fromId:c,toId:this._curId-1}}catch(k){return this._curId=c,{stream:[],parents:[],fromId:this._curId,toId:this._curId-1}}};c.prototype.tokeNode=function(c,e,k,h,n){var m=0;if("SCRIPT"==e.nodeName||e.nodeType==a.Node_COMMENT_NODE)return 0;var s=this._curId++;h.push(c);c=e.nodeName;"http://www.w3.org/2000/svg"==e.namespaceURI&&(c="svg:"+c);k.push("<"+c);d(e,s);a._isWebKitIsh&&(g[s]=e);++m;if(this.processBlockedElem(e,k))return 1;n&&n(e);b(e,function(a,b){k.push(":"+
a);k.push(b)});if(e.firstChild){k.push("[");for(c=e.firstChild;c;c=c.nextSibling)m+=this.tokeNode(s,c,k,h,n);k.push("]")}e.nodeType==a.Node_TEXT_NODE&&k.push(e.textContent);return m};c.prototype.processBlockedElem=function(d,c){var g=this;if(d.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var e=this._blocker.isBlocked(d);if(e){n(d);var k,h=!1;b(d,function(a,b){if("class"==a)b+=" _fs_block_"+e,k=!0;else if("style"==a)b=g._blocker.mungeBlockedStyle(d,b),h=!0;else if("value"==a||"checked"==a)return;
c.push(":"+a);c.push(b)});k||(c.push(":class"),c.push("_fs_block_"+e));h||(c.push(":style"),c.push(this._blocker.mungeBlockedStyle(d,"")));return!0}}return!1};return c}();a.NodeEncoder=k})(m||(m={}));(function(a){function h(a,b,c){var k=Object.getOwnPropertyDescriptor(a.prototype,b);Object.defineProperty(a.prototype,b,{set:function(a){var b=this;setTimeout(function(){c(b)},0);return k.set.call(this,a)},get:function(){return k.get.call(this)}})}function n(a){switch(a.type){case "checkbox":case "radio":return""+
a.checked;default:return a.value}}var c=function(){function a(b,d){this._onchange=b;this._checkElem=d;this._fallback=!1;this._elems={};this._values={}}a.prototype.hookEvents=function(){this.shimPrototypes()||(this._fallback=!0)};a.prototype.addInput=function(a,d){this._fallback&&(this._elems[a]=d,this._values[a]=n(d),this._values[a]&&this._onchange(d))};a.prototype.tick=function(){if(this._fallback)for(var a in this._elems)if(this._checkElem(a)){var d=this._elems[a],c=n(d);c!=this._values[a]&&(this._onchange(d),
this._values[a]=c)}else delete this._elems[a],delete this._values[a]};a.prototype._usingFallback=function(){return this._fallback};a.prototype._trackingElem=function(a){return!!this._elems[a]};a.prototype.shimPrototypes=function(){var a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(!a||!a.set)return!1;h(HTMLInputElement,"value",this._onchange);h(HTMLInputElement,"checked",this._onchange);h(HTMLSelectElement,"value",this._onchange);h(HTMLTextAreaElement,"value",this._onchange);
return!0};return a}();a.InputWatcher=c;a.valueOfInputishElem=n})(m||(m={}));(function(a){var h=function(){function a(){this.dict={idx:-1,map:{}};this.startIdx=0}a.prototype.encode=function(a){function d(){g?1<f.length?k.push([g.idx,f.length]):k.push(g.idx):k.push(f[0])}if(0==a.length)return[];var b,g=null,k=[],e,f=[a[0]];for(b=1;b<a.length;b++)if(e=a[b],g&&g.map.hasOwnProperty(e))f.push(e),g=g.map[e];else{d();var h=this.startIdx+b-f.length;null==g&&(g={idx:h,map:{}},this.dict.map[f[f.length-1]]=g);
g.map[e]={idx:h,map:{}};f=[e];g=this.dict.map.hasOwnProperty(e)?this.dict.map[e]:null}d();this.startIdx+=a.length;return k};return a}();a.LZJGWEncoder=h;h=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,b=0;b<a.length;++b){var g=a[b];switch(typeof g){case "string":this._seq.push(g);break;case "number":this._seq.push(this._seq[g]);break;case "object":for(var k=0;k<g[1];k++)this._seq.push(this._seq[g[0]+
k])}}return d};return a}();a.LZJGWDecoder=h})(m||(m={}));(function(a){a.EVENT_PROCESSING_INTERVAL=250;a.UPLOAD_INTERVAL=5E3;a.USER_INACTIVITY_TIMEOUT=1E4;var h=function(){function a(d){this._interval=d;this._handle=-1}a.prototype.oneShot=function(a){setTimeout(a,this._interval)};a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}(),n=function(){function c(d,
b,c,k,e){"undefined"===typeof b&&(b=function(a){return a});"undefined"===typeof c&&(c=function(){});"undefined"===typeof k&&(k=new h(a.EVENT_PROCESSING_INTERVAL));"undefined"===typeof e&&(e=new h(a.UPLOAD_INTERVAL));this._ctx=d;this._processQueue=b;this._beforeProcessEvents=c;this._processEventsTicker=k;this._uploadTicker=e;this._eventQueue=[];this._outgoingQueue=[];this._bundleQueue=[];this._recordingDisabled=!1;this._bundleSeq=1;this._lastWhenTime=this._lastPostTime=0;this._lastWhen=-1;this._lastUserAction=
0;this._lz=new a.LZJGWEncoder;this._lastBundleTime=d.wallTime()}c.prototype.rawQueue=function(){return this._eventQueue};c.prototype.processedQueue=function(){return this._outgoingQueue};c.prototype.startPipeline=function(){var a=this;this._recordingDisabled||this._pipelineStarted||(this.processEvents(),this._processEventsTicker.start(function(){a.processEvents()}),this._ctx.amInsideIFrame()||this._uploadTicker.start(function(){a.enqueueNextBundle()}),this._pipelineStarted=!0)};c.prototype.enqueue=
function(a,b){this.enqueueAt(this._ctx.now(),a,b)};c.prototype.enqueueAt=function(d,b,c){this._recordingDisabled||(d<=this._lastWhen&&(d=this._lastWhen+1),this._lastWhen=d,this._eventQueue.push({When:d,Kind:b,Args:c}),a.isUserActionEvent(b)&&(this._lastUserAction=d))};c.prototype.disableRecording=function(){this._recordingDisabled=!0;this.stopPipeline()};c.prototype.prequeue=function(a,b){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:b})};c.prototype.appendToOutgoingQueue=
function(a){this._outgoingQueue=this._outgoingQueue.concat(a)};c.prototype.lastSentEventTime=function(){return this._lastWhenTime};c.prototype.swanSong=function(){if(!this._recordingDisabled&&!this._ctx.amInsideIFrame()&&(this.processEvents(),this.enqueueNextBundle(),0<this._bundleQueue.length||this._pendingBundle)){var d=this._bundleQueue.concat();this._pendingBundle&&d.unshift(this._pendingBundle);a.log("Saving "+d.length+" bundles in swan-song.");d={UserId:this._ctx.userId(),SessionId:this._ctx.sessionId(),
PageId:this._ctx.pageId(),Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:this._lastBundleTime};try{localStorage.swanSong=a.stringify(d)}catch(b){}}};c.prototype.recoverSwanSong=function(){if(!this._ctx.amInsideIFrame())try{if("swanSong"in localStorage){var d=localStorage.swanSong;delete localStorage.swanSong;var b=JSON.parse(d);if(b.Bundles)if(b.Bundles&&b.UserId&&b.SessionId&&b.PageId)for(d=0;d<b.Bundles.length;++d)this.sendSwanSongBundle(b.UserId,b.SessionId,b.PageId,b.PageStartTime,
b.LastBundleTime,b.Bundles[d]);else a.log("Malformed swan song found. Ignoring it.");else b.Bundle&&b.UserId&&b.SessionId&&b.PageId?this.sendSwanSongBundle(b.UserId,b.SessionId,b.PageId,b.PageStartTime||0,b.LastBundleTime||0,b.Bundle):a.log("Malformed swan song found. Ignoring it.")}}catch(c){a.log("Error recovering swan-song: "+c)}};c.prototype.sendSwanSongBundle=function(d,b,c,k,e,f){d="/rec/bundle?OrgId="+this._ctx.orgId()+"&UserId="+d+"&SessionId="+b+"&PageId="+c+"&Seq="+f.Seq;0!=k&&(d+="&PageStartTime="+
k);0!=e&&(d+="&DeltaT="+(this._ctx.wallTime()-e));this._ctx.post(d,f,function(b){a.log("Sent "+f.Evts.length+" trailing events from last session as Seq "+f.Seq)},function(){a.log("Failed to send events from last session")})};c.prototype.rebaseIframe=function(d){var b=this._ctx.baseUri();0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a.EVENT_SET_FRAME_BASE,Args:[b]}):this.enqueue(a.EVENT_SET_FRAME_BASE,[b]);for(var b=0,c=this._eventQueue.length;b<c;b++){var k=
this._eventQueue[b],e=k.When+this._ctx.startTime()-d;0>e&&(e=0);k.When=e}};c.prototype.processEvents=function(){this._beforeProcessEvents();if(0!=this._eventQueue.length)if(this._ctx.now()-this._lastUserAction>a.USER_INACTIVITY_TIMEOUT)this._eventQueue=this._processQueue(this._eventQueue);else{if(this._ctx.amInsideIFrame())parent.postMessage(a.FS_IFRAME_EVENTS+a.FS_DELIMITER+a.stringify(this.processAndEncodeQueue(this._eventQueue)),"*");else{if(void 0===this._ctx.pageId())return;this._outgoingQueue=
this._outgoingQueue.concat(this.processAndEncodeQueue(this._eventQueue))}this._eventQueue=[]}};c.prototype.enqueueNextBundle=function(){if(0==this._outgoingQueue.length)return this.maybeSendNextBundle(),null;var a={When:this._outgoingQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingQueue};this._outgoingQueue=[];this._bundleQueue.push(a);this.maybeSendNextBundle()};c.prototype.maybeSendNextBundle=function(){var d=this;if(!this._pendingBundle&&0!=this._bundleQueue.length){var b=this._pendingBundle=
this._bundleQueue.shift(),c=this._ctx.wallTime(),k="/rec/bundle?OrgId="+this._ctx.orgId()+"&UserId="+this._ctx.userId()+"&SessionId="+this._ctx.sessionId()+"&PageId="+this._ctx.pageId()+"&Seq="+b.Seq+"&DeltaT="+(c-this._lastBundleTime);this._lastPostTime=this._lastBundleTime=c;this._lastWhenTime=b.Evts[b.Evts.length-1].When;var e=function(){d._ctx.post(k,b,function(c){a.log("Sent bundle "+b.Seq+" with "+b.Evts.length+" events");d._pendingBundle=null;d._ctx.wallTime()-d._lastPostTime>a.UPLOAD_INTERVAL&&
d.maybeSendNextBundle()},function(){a.log("Failed to send events.");d._uploadTicker.oneShot(e)})};e()}};c.prototype.processAndEncodeQueue=function(a){a=this._processQueue(a);this.encodeInserts(a);return a};c.prototype.encodeInserts=function(d){for(var b=0;b<d.length;++b){var c=d[b];c.Kind==a.EVENT_MUT_PARSED_INSERT&&(c.Kind=a.EVENT_MUT_INSERT,c.Args=[c.Args[2],c.Args[3],this._lz.encode(c.Args[4])])}};c.prototype.stopPipeline=function(){this._pipelineStarted&&(this._processEventsTicker.stop(),this._uploadTicker.stop())};
return c}();a.EventQueue=n})(m||(m={}));(function(a){var h=function(){function h(c,d,b,g,k){"undefined"===typeof k&&(k=function(a,b){});this._ctx=c;this._queue=d;this._blocker=b;this._idTree=g;this._visitor=k;this._encoder=new a.NodeEncoder(c,b)}h.prototype.hookMutations=function(a){var d=this;"undefined"===typeof a&&(a=document.documentElement);(new window.MutationObserver(function(a){d.handleMutations(a)})).observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};
h.prototype.parseRawInserts=function(c){for(var d=this,b=0;b<c.length;++b){var g=c[b];if(g.Kind==a.EVENT_MUT_UNPARSED_INSERT){var k=g.Args[0];if(this._idTree.find(k)){var e=g.Args[1],f=this._encoder.tokenizeNode(k,g.Args[2],function(a){d._visitor(g.When,a)});0<f.parents.length&&this._idTree.insert(f.fromId,f.toId,f.parents);g.Kind=a.EVENT_MUT_PARSED_INSERT;g.Args=[f.fromId,f.parents,k,e,f.stream]}else g.Kind=a.EVENT_MUT_PARSED_INSERT,g.Args=[-1,[],-1,-1,[]]}}};h.prototype.handleMutations=function(a){for(var d=
this._encoder.curId(),b=0,g=0;g<a.length;++g)"childList"==a[g].type&&0<a[g].addedNodes.length&&(this._handleMutations(d,a.slice(b,g)),b=g);this._handleMutations(d,a.slice(b,a.length))};h.prototype._handleMutations=function(c,d){for(var b=[],g=0;g<d.length;++g){var k=d[g],e={target:k.target?a.fsid(k.target):0,next:k.nextSibling?a.fsid(k.nextSibling):0,removes:[]};b.push(e);if("childList"==k.type)for(var f=0;f<k.removedNodes.length;++f){var h=a.fsid(k.removedNodes[f]);e.removes.push(h)}}for(g=0;g<d.length;++g){k=
d[g];(e=b[g].target)||(e=a.fsid(k.target));if(e&&e<c)switch(k.type){case "characterData":f=k.target.textContent;k.oldValue!=f&&(a.isBlocked(k.target)||this.addTextMutation(e,f));break;case "attributes":h=k.attributeName;f=k.target.getAttribute(h);k.oldValue!=f&&this.addAttributeMutation(e,h,f);break;case "childList":0<k.addedNodes.length&&!a.isBlocked(k.target)&&((f=b[g].next)||(f=k.nextSibling?a.fsid(k.nextSibling):-1),this.addInsertNodesMutation(e,f||-1,k.addedNodes)),this.addRemoveNodesMutation(k.removedNodes,
b[g].removes)}this.maybeAddPlaceholderResize(k.target)}};h.prototype.maybeAddPlaceholderResize=function(c){for(;c&&!a.hasFsid(c);)c=c.parentNode;if(c&&a.isBlocked(c)){var d=c.getBoundingClientRect(),b=Math.floor(d.width),d=Math.floor(d.height);this._queue.enqueue(a.EVENT_PLACEHOLDER_SIZE,[a.fsid(c),b,d])}};h.prototype.addRemoveNodesMutation=function(c,d){for(var b=[],g=0;g<d.length;++g){var k=d[g];k||(k=a.fsid(c[g]));this._idTree.find(k)&&(b.push(k),this._encoder.unpinNodes(this._idTree.remove(k)))}0<
b.length&&this._queue.enqueue(a.EVENT_MUT_REMOVE,b)};h.prototype.addTextMutation=function(c,d){this._queue.enqueue(a.EVENT_MUT_TEXT,[c,d])};h.prototype.addAttributeMutation=function(c,d,b){this._queue.enqueue(a.EVENT_MUT_ATTR,[c,d,b])};h.prototype.addInsertNodesMutation=function(c,d,b){for(var g=this,k=0;k<b.length;++k)if(!this._ctx.pageId())this._queue.enqueue(a.EVENT_MUT_UNPARSED_INSERT,[c,d,b[k]]);else if(!this._idTree.find(a.fsid(b[k]))&&this._idTree.find(c)){var e=this._ctx.now(),f=this._encoder.tokenizeNode(c,
b[k],function(a){g._visitor(e,a)});0<f.parents.length&&(this._idTree.insert(f.fromId,f.toId,f.parents),this._queue.enqueueAt(e,a.EVENT_MUT_PARSED_INSERT,[f.fromId,f.parents,c,d,f.stream]))}};return h}();a.MutationHandler=h})(m||(m={}));(function(a){function h(a,b,c){c&&(b.FId=c);a.push(b)}var n=function(){function a(b,d,c){this._ctx=b;this._q=d;this._valueIndices=c;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&h(this._q,a,this._ctx.frameId());this._evts.push(a)};a.prototype.finish=
function(a,d){var c=this._evts.length;if(1>=c)return!1;for(var e=this._evts[0].When,f=this._evts[c-1].When,h=0;h<this._valueIndices.length;++h){var l=this._valueIndices[h],n=this._evts[0].Args[l],m=(this._evts[1].When-e)/(f-e),w=(this._evts[1].Args[l]-n)/m,s=this._evts[c-1].Args[l],m=(f-this._evts[c-2].When)/(f-e);d.push(n,s,w,(s-this._evts[c-2].Args[l])/m)}this._evts[0].Kind=a;this._evts[0].Args=d;return!0};a.prototype.evts=function(){return this._evts};return a}(),c=function(){function c(a,d,h){this._ctx=
a;this._idTree=d;this._blocker=h;this._gotInitialScroll=!1}c.prototype.processQueue=function(b){if(0==b.length)return b;this.maybeAddInitialScroll();for(var c=b[0].When,d=this._ctx.now(),e={},f={},m={},l=[],A=new n(this._ctx,l,[0,1]),x={},w={},s=0;s<b.length;++s){var q=b[s];switch(q.Kind){case a.EVENT_MUT_UNPARSED_INSERT:throw"unexpected";case a.EVENT_MUT_PARSED_INSERT:var r=q.Args[0],v=q.Args[1].length;if(!this._idTree.find(r)){for(var u=0;u<v;++u)m[r+u]=!0;if((u=l[l.length-1])&&u.Kind==a.EVENT_MUT_SKIPIDS){u.Args[0]+=
v;continue}else q={When:q.When,Kind:a.EVENT_MUT_SKIPIDS,Args:[v]}}q.When=c;h(l,q,this._ctx.frameId());break;case a.EVENT_MUT_REMOVE:var v=q.Args,y;(u=l[l.length-1])&&u.Kind==a.EVENT_MUT_REMOVE?y=u.Args:(q.When=c,y=q.Args=[],h(l,q,this._ctx.frameId()));for(u=0;u<v.length;++u)r=v[u],r in m||y.push(r);break;case a.EVENT_MUT_ATTR:r=q.Args[0];if(!(r in m)){u=q.Args[1];q=q.Args[2];switch(u){case "style":(v=this._blocker.wasIdBlocked(r))&&(q=this._blocker.mungeBlockedStyle(v,q));break;case "class":(v=this._blocker.wasIdBlocked(r))&&
0>q.indexOf("_fs_block_")&&(v=this._blocker.isBlocked(v),q+=" _fs_block_"+v);break;case "value":if(this._blocker.wasIdBlocked(r))continue}e[r+":"+u]=q}break;case a.EVENT_MUT_TEXT:r=q.Args[0];r in m||(f[r]=q.Args[1]);break;case a.EVENT_PLACEHOLDER_SIZE:r=q.Args[0];if(r in m)continue;q.When=c;h(l,q,this._ctx.frameId());break;case a.EVENT_MOUSEMOVE:A.add(q);break;case a.EVENT_TOUCHMOVE:r=q.Args[0];r in x||(x[r]=new n(this._ctx,l,[1,2]));x[r].add(q);break;case a.EVENT_SCROLL:r=q.Args[0];r in w||(w[r]=
new n(this._ctx,l,[1,2]));w[r].add(q);break;default:h(l,q,this._ctx.frameId())}}A.finish(a.EVENT_MOUSEMOVE_CURVE,[d])&&(b=A.evts(),c=b[b.length-1].Args,2<c.length&&c[2]&&b[0].Args.push(c[2]));for(r in w)b=parseInt(r),w[b].finish(a.EVENT_SCROLL_CURVE,[d,b]);for(r in x)b=parseInt(r),x[b].finish(a.EVENT_TOUCHMOVE_CURVE,[d,b]);for(var C in e)x=C.split(":"),h(l,{Kind:a.EVENT_MUT_ATTR,When:d,Args:[parseInt(x[0]),x[1],e[C]]},this._ctx.frameId());for(C in f)h(l,{Kind:a.EVENT_MUT_TEXT,When:d,Args:[parseInt(C),
f[C]]},this._ctx.frameId());return l};c.prototype.maybeAddInitialScroll=function(){!this._gotInitialScroll&&document.body&&(this._ctx.addWindowScroll(),this._gotInitialScroll=!0)};return c}();a.EventProcessor=c})(m||(m={}));(function(a){function h(a){I&&console&&console.log(a)}function m(a){var b=Array.prototype.toJSON,c=String.prototype.toJSON;b&&delete Array.prototype.toJSON;c&&delete String.prototype.toJSON;a=JSON.stringify(a);b&&(Array.prototype.toJSON=b);c&&(String.prototype.toJSON=c);return a}
function c(){return(new Date).getTime()}function d(){return window!=top&&!V}function b(b,c,d,e){"undefined"===typeof e&&(e=null);b="//"+E+b;var f=null;null!=c&&(f=m(c),L+=f.length,h("total bytes written: "+L));var g=new XMLHttpRequest;if("withCredentials"in g)g.onreadystatechange=function(){g.readyState==a.XHR_DONE&&(200==g.status?d(g.responseText):e())},g.open("POST",b),g.withCredentials=!0,g.setRequestHeader("Content-Type","text/plain"),g.send(f);else{var k=new XDomainRequest;k.onload=function(){d(k.responseText)};
k.onerror=function(){e()};k.onprogress=function(){};k.open("POST",b);k.send(f)}}function g(){if("baseURI"in document)return document.baseURI;var a=document.getElementsByTagName("base")[0];return a&&a.href?a.href:location.href}function k(a){(a=a.target.tagName)&&(a=a.toLowerCase());return a}function e(a,b){return a.tagName&&a.tagName.toLowerCase()in b?!0:a.parentNode?e(a.parentNode,b):!1}function f(a,b){for(var c=0;c<a.changedTouches.length;++c){var d=a.changedTouches[c];p.enqueue(b,[d.identifier,
d.clientX,d.clientY])}}function t(){var b=document.activeElement;if(b&&"value"in b){var c=a.fsidIfNotBlocked(b);c&&p.enqueue(a.EVENT_VALUECHANGE,[c,b.value])}}function l(){var b=a.fsid(document.body);if(b){var c,d;"pageXOffset"in window?(c=window.pageXOffset,d=pageYOffset):(c=document.body.scrollLeft,d=document.body.scrollTop);p.enqueue(a.EVENT_SCROLL,[b,c,d])}}function A(){p.enqueue(a.EVENT_RESIZE,[document.documentElement.clientWidth,document.documentElement.clientHeight])}function x(){var b=location.href;
M!=b&&(M=b,p.enqueue(a.EVENT_NAVIGATE,[location.href,document.title]))}function w(b){var c=a.fsidIfNotBlocked(b);c&&p.enqueue(a.EVENT_VALUECHANGE,[c,a.valueOfInputishElem(b)])}function s(){W||(W=!0,p.enqueue(a.EVENT_UNLOAD,[]),p.swanSong())}function q(){for(var a={},b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].replace(/^\s+|\s+$/g,"").split("=");a[d[0]]=d[1]}return a.fs_uid}function r(a){B=a.UserIntId;J=a.SessionIntId;N=a.PageIntId;X=a.CookieDomain;document.cookie="fs_uid="+B+"; domain=."+
encodeURIComponent(X)+"; expires=expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";h("/User,"+B+"/Session,"+J+"/Page,"+N)}function v(){var a=document.doctype;if(!a)return null;var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"}function u(){(B=q())||(B="");var c=document.documentElement,d=window._fs_hash;M=location.href;if(K)c={OrgId:D,UserId:B,Url:location.href,Base:g(),ScreenWidth:window.screen.width,ScreenHeight:window.screen.height,
Width:c.clientWidth,Height:c.clientHeight,Referrer:document.referrer,Doctype:v(),Hash:d},b("/rec/page",c,function(b){b=JSON.parse(b);r(b);p.prequeue(a.EVENT_SYS_SETVAR,["user",m(b.InitSetUserVars),!0]);window._fs_ready&&window._fs_ready();for(var c=0;c<b.Blocks.length;++c)z.addRule(b.Blocks[c]);p.startPipeline()},function(){p.disableRecording();T();h("Disabling FS.");window._fs_ready&&window._fs_ready(!0)});else{h("Unable to record playback stream.");var e=document.createElement("script");window.__fs_startResponse=
function(a){r(a);document.body.removeChild(e)};e.src="//"+E+"/rec/page?OrgId="+D+"&UserId="+B+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(g())+"&ScreenWidth="+window.screen.width+"&ScreenHeight="+window.screen.height+"&Width="+c.clientWidth+"&Height="+c.clientHeight+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(v())+"&Fallback=true"+(d?"&Hash="+d:"");document.body.appendChild(e)}}function y(){Y.hookMutations();document.documentElement.addEventListener("scroll",
function(b){b=b.target;var c=a.fsid(b);c&&p.enqueue(a.EVENT_SCROLL,[c,b.scrollLeft,b.scrollTop])},!0);window.addEventListener("mousemove",function(b){b=a.hasFsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];p.enqueue(a.EVENT_MOUSEMOVE,b)},!0);window.addEventListener("mousedown",function(b){p.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY]);!e(b.target,{button:!0,a:!0,input:!0})||"input"==k(b)&&"submit"!=b.target.type||p.swanSong()},!0);window.addEventListener("mouseup",function(b){p.enqueue(a.EVENT_MOUSEUP,
[b.clientX,b.clientY])},!0);window.addEventListener("keydown",function(b){t();var c=document.activeElement;c&&!a.fsidIfNotBlocked(c)||p.enqueue(a.EVENT_KEYDOWN,[b.keyCode]);switch(k(b)){case "button":13!=b.keyCode&&32!=b.keyCode||p.swanSong();break;case "a":13==b.keyCode&&p.swanSong();break;case "input":"submit"==b.target.type&&13==b.keyCode&&p.swanSong()}},!0);window.addEventListener("keyup",function(b){t();var c=document.activeElement;c&&!a.fsidIfNotBlocked(c)||p.enqueue(a.EVENT_KEYUP,[b.keyCode])},
!0);window.addEventListener("scroll",function(a){l()});window.addEventListener("resize",function(a){A()});document.body.addEventListener("click",function(b){(b=a.fsid(b.target))&&p.enqueue(a.EVENT_CLICK,[b])},!0);document.body.addEventListener("focus",function(b){(b=a.fsid(b.target))&&p.enqueue(a.EVENT_FOCUS,[b])},!0);document.body.addEventListener("blur",function(b){(b=a.fsid(b.target))&&p.enqueue(a.EVENT_BLUR,[b])},!0);document.body.addEventListener("change",function(a){w(a.target)},!0);window.addEventListener("touchstart",
function(b){f(b,a.EVENT_TOUCHSTART)},!0);window.addEventListener("touchend",function(b){f(b,a.EVENT_TOUCHEND)},!0);window.addEventListener("touchmove",function(b){f(b,a.EVENT_TOUCHMOVE);l()},!0);window.addEventListener("touchcancel",function(b){f(b,a.EVENT_TOUCHCANCEL)},!0);window.addEventListener("play",function(b){var c=a.EVENT_PLAY;(b=a.fsid(b.target))&&p.enqueue(c,[b])},!0);window.addEventListener("pause",function(b){var c=a.EVENT_PAUSE;(b=a.fsid(b.target))&&p.enqueue(c,[b])},!0);O.hookEvents();
if(history.pushState){window.addEventListener("popstate",function(){x()});var b=history.pushState;history.pushState=function(a,c,d){b.call(this,a,c,d);x()};var c=history.replaceState;history.replaceState=function(a,b,d){c.call(this,a,b,d);x()}}}function C(){var b=!1,c=function(){b||(b=!0,y(),p.enqueue(a.EVENT_DOMLOADED,[]),p.enqueue(a.EVENT_MUT_UNPARSED_INSERT,[-1,-1,document.documentElement]),A())},e=!1,f=function(){e||(e=!0,p.enqueue(a.EVENT_LOAD,[]))};switch(document.readyState){case "interactive":document.attachEvent||
c();break;case "complete":c(),f()}b||document.addEventListener("DOMContentLoaded",function(a){c()});e||window.addEventListener("load",function(a){c();f()});d()||(window.addEventListener("beforeunload",function(a){s()}),window.addEventListener("unload",function(a){s()}))}function S(b,c){var d={},e;for(e in c)if(c.hasOwnProperty(e)){var f=c[e];h("set-var("+b+'): "'+e+'" = '+m(f));"user"!=b&&h('invalid scope "'+b+'"; only "user" is supported at present');var g;if(e in Z)g=Z[e];else{g=e.split("_");if(2!=
g.length){h('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');continue}g=g[1]}g in $?$[g](f)?("date"==g&&(f=(f.constructor===Date?f:new Date(f)).toISOString()),d[e]=f):h("illegal value "+m(f)+" for type "+g):h('invalid type "'+g+'"')}p.enqueue(a.EVENT_SYS_SETVAR,[b,m(d)])}function U(){return B+":"+J}function ca(){window.addEventListener("message",function(b){if("string"==typeof b.data&&0==b.data.indexOf(a.FS_MESSAGE_PREFIX)){var c=b.data.split(a.FS_DELIMITER);
if(c[0]==a.FS_SET_FRAME_ID_CMD)try{var d=parseInt(c[1]),e=parseInt(c[2]);var f=JSON.parse(c[3]);if(d){h("iframe recording. FrameId: "+d);H=d;for(c=0;c<f.length;++c)z.addRule(f[c]);p.rebaseIframe(e);F=e;p.startPipeline()}else h("Outer page gave us a bogus frame Id! Iframe: "+location.href)}catch(g){h("Failed to parse frameId from message"+b.data)}else c[0]==a.FS_DISABLE_RECORDING?(p.disableRecording(),T()):h("Invalid _fs postmessage command"+c[0])}});H||(0==H?h("For some reason the outer window attempted to request a frameId"):
parent.postMessage(a.FS_REQUEST_FRAME_ID+a.FS_DELIMITER,"*"))}function T(){for(var b=0;b<G.length;b++){var c=G[b];c.contentWindow&&c.contentWindow.postMessage&&c.contentWindow.postMessage(a.FS_DISABLE_RECORDING,"*")}}function da(){window.addEventListener("message",function(b){if("string"==typeof b.data&&0==b.data.indexOf(a.FS_MESSAGE_PREFIX)){var c=b.data.split(a.FS_DELIMITER);if(c[0]==a.FS_IFRAME_EVENTS){b=JSON.parse(c[1]);var c=p.lastSentEventTime(),d=aa[b[0].FId];c<d&&(c=d);if(b[0].When<c)for(var c=
c-b[0].When,d=0,e=b.length;d<e;d++)b[d].When+=c;p.appendToOutgoingQueue(b)}else if(c[0]==a.FS_REQUEST_FRAME_ID){a:{c=b.source;for(d=0;d<G.length;d++)if(G[d].contentWindow==c){c=a.fsid(G[d]);break a}h("Unable to locate frame for window");c=NaN}c?(d=m(z.rawRules),b.source.postMessage(a.FS_SET_FRAME_ID_CMD+a.FS_DELIMITER+c+a.FS_DELIMITER+F+a.FS_DELIMITER+d,"*")):h("No FrameId found. Hoping to send one later.")}else h("Invalid _fs postmessage command"+c[0])}})}function P(a){try{if("FS"in a.contentWindow)h("'FS' already defined in iframe. Aborting injection.");
else{var b="if (!('FS' in window)) { var _fs_org='"+D+"', _fs_host='"+E+"', _fs_run_in_iframe=true, _fs_debug="+I+"; (function(w,a,t){a=w.createElement('script');a.async=1;a.src='https://'+_fs_host+'/s/fs.js';w.head.appendChild(a)})(document); }",c=a.contentDocument,d=c.createElement("script");d.innerText=b;c.head.appendChild(d)}}catch(e){h("iFrame no injecty. Probably not same origin.")}}function ea(b,c){G.push(c);if(c.hasAttribute("src")&&("javascript:;"!=c.src&&"about:blank"!=c.src&&"javascript:false;"!=
c.src&&0!=c.src.indexOf(fa)||"FS"in c.contentWindow))h("Frame Doesn't need injecting ["+c.src+"]");else if(h("Attempting to setup Frame ["+c.src+"]"),P(c),c.onload&&"function"==typeof c.onload){var d=c.onload;c.onload=function(a){d.call(this,a);P(c)}}else c.onload=function(){P(c)};if(c.contentWindow.postMessage){var e=m(z.rawRules);c.contentWindow.postMessage(a.FS_SET_FRAME_ID_CMD+a.FS_DELIMITER+b+a.FS_DELIMITER+F+a.FS_DELIMITER+e,"*")}}var I=!1,L=0,D,B,J,N,H,E,X,fa=window.location.protocol+"//"+
window.location.host,V,K,F=c(),M,aa={},ba,Q={startTime:function(){return F},now:function(){return c()-F},wallTime:c,orgId:function(){return D},userId:function(){return B},sessionId:function(){return J},pageId:function(){return N},baseUri:g,amInsideIFrame:d,frameId:function(){return H},post:b,addWindowScroll:l},z=new a.Blocker,R=new a.IdTree,O=new a.InputWatcher(function(a){w(a)},function(a){return!!R.find(a)}),ga=new a.EventProcessor(Q,R,z),p=new a.EventQueue(Q,function(a){Y.parseRawInserts(a);return ga.processQueue(a)},
function(){O.tick()}),Y=new a.MutationHandler(Q,p,z,R,function(b,c){switch(c.nodeName){case "INPUT":case "TEXTAREA":case "SELECT":O.addInput(a.fsid(c),c);break;case "IFRAME":var d=a.fsid(c);if(!d){h("fsid missing or invalid for iFrame."+c.src);break}ba||(da(),ba=!0);aa[d]=b;ea(d,c);break;case "VIDEO":case "AUDIO":c.paused||(d=a.fsid(c),p.enqueue(a.EVENT_PLAY,[d]))}});a.log=h;a.stringify=m;var W=!1;a._init=function(){if("_fs_host"in window||"_fs_ext_host"in window)if("_fs_org"in window||"_fs_ext_org"in
window)if("_fs_ext_debug"in window?I=!!window._fs_ext_debug:"_fs_debug"in window&&(I=!!window._fs_debug),E=window._fs_ext_host||window._fs_host,D=window._fs_ext_org||window._fs_org,V=!!window._fs_is_outer_script,H=d()?null:0,h("host: "+E),h("orgid: "+D),K=!!window.MutationEvent,d())window._fs_run_in_iframe?parent.postMessage?ca():(K=!1,h("postMessage not supported")):h("Fullstory recording for this page is NOT allowed within an iFrame.");else{z.addRule({Selector:"object",Kind:a.NYI_KIND});z.addRule({Selector:"embed",
Kind:a.NYI_KIND});z.addRule({Selector:"canvas",Kind:a.NYI_KIND});z.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});z.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});var b=window.FS.q;if(b){for(var c=0;c<b.length;c++)S(b[c][0],b[c][1]);delete window.FS.q}u()}else h("Missing global _fs_org. Recording disabled.");else h("Missing global _fs_host. Recording disabled.")};a._record=function(){K&&(p.recoverSwanSong(),F=c(),C())};var Z={uid:"str",displayName:"str",email:"str"},$={str:function(a){return"string"==
typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return!isNaN(a.constructor===Date?a:new Date(a))}};a._api=S;a.setUid=function(b,c,d){b&&"string"==typeof b?c&&"string"!=typeof c?h("setUid(): second argument (display name) must be a string"):(c||(c=b),d&&"object"!=typeof d?h('setUid(): third argument (metadata) must be of the form {name0: "value0", name1: "value1", ...}'):
(d=d?m(d):"",h("setting uid: "+b+", meta: "+d),p.enqueue(a.EVENT_SYS_SETMETA,[b,c,d]))):h("setUid(): first argument (user id) is required and must be a string")};a.getCurrentSessionURL=function(){return"https://"+E+"/ui/"+D+"/discover/session/"+U()};a.getCurrentSession=U;a.FS_MESSAGE_PREFIX="_fs";a.FS_DELIMITER="\u2603";a.FS_REQUEST_FRAME_ID=a.FS_MESSAGE_PREFIX+"RequestFrameId";a.FS_SET_FRAME_ID_CMD=a.FS_MESSAGE_PREFIX+"SetFrameId";a.FS_IFRAME_EVENTS=a.FS_MESSAGE_PREFIX+"EvtBundle";a.FS_DISABLE_RECORDING=
a.FS_MESSAGE_PREFIX+"DisableRecording";var G=[]})(m||(m={}));try{"FS"in window||(window.FS={}),window.FS.setUid=m.setUid,window.FS.getCurrentSessionURL=m.getCurrentSessionURL,window.FS.getCurrentSession=m.getCurrentSession,window.FS._api=m._api,m._init(),m._record()}catch(y){window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
